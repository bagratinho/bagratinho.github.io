<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/font-awesome.css">
	<link href="https://fonts.googleapis.com/css?family=Exo+2:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
	<link rel="stylesheet" href="css/css.css">
	<title>Document</title>
	<script
	  src="https://code.jquery.com/jquery-2.2.4.min.js"
	  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
	  crossorigin="anonymous"></script>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<h3>CRYPTOS INVESTED</h3>
				<div class="row">
					<div class="col-lg-12">
						<ul id="cryptos">
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
<script>
	
	var coins = [
		"https://api.coinmarketcap.com/v1/ticker/hush/",
		"https://api.coinmarketcap.com/v1/ticker/Singulardtv/",
		"https://api.coinmarketcap.com/v1/ticker/stellar/",
		"https://api.coinmarketcap.com/v1/ticker/bitcoin-gold/",
		"https://api.coinmarketcap.com/v1/ticker/ripple/",
		"https://api.coinmarketcap.com/v1/ticker/bitcoin/",
	];
	function update() {
		$("#cryptos").html("");
		console.log("updated")
		for (var i=0; i<coins.length; i++) {
			$.ajax({
			  url: coins[i],
			  context: document.body
			}).done(function(data) {
				var ch1h = parseFloat(data[0].percent_change_1h);
				var ch24h = parseFloat(data[0].percent_change_24h);
				var ch7d = parseFloat(data[0].percent_change_7d);
				
				var status1 =  ch7d > 40 ? "pos-dinamics1" : ch7d < -40 ? "neg-dinamics1" : "default1";
				var status2 =  ch24h > 40 ? "pos-dinamics2" : ch24h < -40 ? "neg-dinamics2" : "default2";
				var status3 =  ch1h > 40 ? "pos-dinamics3" : ch1h < -40 ? "neg-dinamics3" : "default3";
				
				var ch1h_str = ch1h >= 0 ? `<span class='pos'>${ch1h}%</span>` : `<span class='neg'>${ch1h}%</span>`;
				var ch24h_str = ch24h >= 0 ? `<span class='pos'>${ch24h}%</span>` : `<span class='neg'>${ch24h}%</span>`;
				var ch7d_str = ch7d >= 0 ? `<span class='pos'>${ch7d}%</span>` : `<span class='neg'>${ch7d}%</span>`;
				var item = `<li class="${status1} ${status2} ${status3}"> 
					<div><label>${data[0].name}:</label> <span>$ ${data[0].price_usd}</span></div>
					<div><label>Market Cap:</label> $ ${data[0].market_cap_usd}</div>
					<div><label>Change 1h:</label> ${ch1h_str}<i class="fa fa-arrow-up"></i><i class="fa fa-arrow-down"></i></div>
					<div><label>Change 24h:</label> ${ch24h_str}<i class="fa fa-arrow-up"></i><i class="fa fa-arrow-down"></i></div>
					<div><label>Change 7d:</label> ${ch7d_str}<i class="fa fa-arrow-up"></i><i class="fa fa-arrow-down"></i></div>
				</li>`;
				$("#cryptos").append(item);
			});
		}
	}
	update();
	window.setInterval(update, 30000);
</script>	
</body>
</html>

